# Base Station

The base station is a device that will receive payloads from the detection units and transmit its state to an Amazon cloud server. In order to receive payloads from the detection units, the base station will host a long distance wireless network with a designed range of one mile in diameter. Once a payload is received from a detection unit, the base station will decrypt the incoming transmission and parse the payload for metadata related to the detection unit that sent the data. Detection Unit payloads consists of: the client serial identification code and the payload to transmit to the Amazon cloud server. After decryption and parsing the payload, the base station will transmit the payload to the Amazon cloud server for further analysis. 

## Hardware

The hardware for the base station was chosen based on power usage, wireless performance, processing performance, and cost. The wireless network uses SemTech’s wireless LoRa (Long Range) technology. LoRa provides a greater wireless range than Wi-Fi, Bluetooth, or ZigBee while being more cost efficient than using a cellular network service as it does not incur wireless usage fees during its operation. The hosted wireless LoRa network will use the open 915 MHz ISM Band for ITU “Americas” which is free to use for industrial and scientific purposes. This allows the group to use publicly available spectrum space to transmit data on campus. The base station will have an antenna which is connected to an Arduino compatible Adafruit Feather that has the LoRa radio hardware for incoming transmissions. The Adafruit Feather connects to a 900 MHz dipole antenna to increase the range of the wireless network to encompass the TCNJ campus. The Adafruit Feather is then connected to a microcomputer called the Raspberry Pi to perform the routing and multiplexing needed to communicate with the Amazon cloud server. The Raspberry Pi features: USB to connect the Adafruit Feather to the microcomputer, 100-BaseT ethernet, and SD Card storage to hold the firmware that can be updated from a software update hosted from GitHub and the Amazon cloud server. The Raspberry Pi will be connected to the campus internet via CAT 6 Ethernet and a micro-USB 2 cable to power both the Raspberry Pi and the Adafruit Feather.

## Software

Based on the base station’s hardware, its software will need to provide routing functionality in between different system components. The Adafruit Feather with the LoRa radio will contain software will not only broadcast a LoRa wireless network using the 915 MHz spectrum space but also receive data that are transmitted from each detection unit. The Arduino software will be linked against the Arduino standard library and the RadioHead LoRa wireless library. The software on the Raspberry Pi will include a stripped-down Linux Debian operating system, the nodeJS server environment, and controller code to accept serial data from the Adafruit Feather and multiplex the payload to the Amazon cloud server. On boot, the Raspberry Pi will attempt to search for and update itself with the latest software from GitHub. Then the nodeJS server will then route the received payload.

## Enclosure

The team also designed an enclosure to house the components that will be needed for the base station. The base station will be located within the interior of the building and does not need to be weatherproof. This allowed the design to be more flexible in terms of its open holes and places where there needs to be sealed. To house the components, there is a top and bottom which allows the components to be mounted on the bottom and a twist on lid to completely enclosure the components. Holes and grooves on the bottom will allow for cable routing for power, ethernet and USB.