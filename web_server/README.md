# Web Server

The Amazon cloud server is responsible for aggregating incoming traffic data that is sent from the detection unit that was routed from the base station. For each incoming traffic payload, the server will store, update its records, and present up-to-date information about the state of the parking lots on campus. In order to satisfy its aimed functionality, the server is provisioned with the Linux Foundationâ€™s nodeJS server environment and a PostgreSQL database hosted with Heroku from Salesforce.

## Software

The nodeJS server environment used in this system is version 9.5 which not only contains up-to-date security patches but also supports the most recent version of the Javascript programming language, ECMAScript 6. The group programmed custom software that will allow the instance to parse and communicate with the detection unit, frontend user interface, and database. The server has access to port 80 for hosting a frontend user interface, as well as port 3000 for hosting a constant socket connection between the Amazon instance in the cloud and the base station on campus. This will allow the instance in the cloud to connect to the base station on campus without network configuration and firewall exceptions. Internally, the Amazon instance has port 5432 to connect the nodeJS server to the backend PostgreSQL database. The database contains a schema that defines: detection units, base stations, and general settings. The detection units table contains the following properties: name, currently occupied parking spaces, total lot occupancy, and a node identification number. The base stations table contains the following properties: name, firmware version, connection status, error log, and a base station identification number. The general settings item contains the following properties: name of the website, the version of the latest base station firmware, and a link to the latest base station firmware. The trend table consists of logs detailing when a vehicle is detected from a detection unit that includes its timestamp. To provide a simple API to the nodeJS instance, the database contains a set of convenience functions to update the record for each detection unit and base station. They include: generateSerial for generating unique serial identification, addDetectionUnits for adding additional detection units, and addBaseStations for adding additional base stations.
